def scannerHome = tool 'SonarScanner 4.0'

pipeline {
  agent any
  stages {
    // stage('Scan') {
    //   steps {
    //     withSonarQubeEnv(installationName: 'My SonarQube Server') { 
    //       sh './mvnw clean org.sonarsource.scanner.maven:sonar-maven-plugin:3.9.0.2155:sonar'
    //     }
    //   }
    // }
    // stage('SonarQube analysis') {
    //   steps {
    //     withSonarQubeEnv('My SonarQube Server') { // If you have configured more than one global server connection, you can specify its name
    //       sh "${scannerHome}/bin/sonar-scanner"
    //     }
    //   }
    // }
    stage('SonarQube analysis') {
      steps {
        withSonarQubeEnv(credentialsId: 'f225455e-ea59-40fa-8af7-08176e86507a', installationName: 'My SonarQube Server') { // You can override the credential to be used
          sh 'mvn org.sonarsource.scanner.maven:sonar-maven-plugin:3.7.0.1746:sonar'
        }
      }
    }
  }
}